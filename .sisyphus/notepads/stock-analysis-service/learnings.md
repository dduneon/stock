- Initialized project with Flask, PostgreSQL (TimescaleDB), and Redis.
- Configured Flask app to use environment variables with a default fallback for development.
- Implemented a basic health check endpoint at /health.
- Structured the backend with a clear separation between app initialization (app/__init__.py) and entry point (app.py).
- Implemented `KoreanMarketService` to interface with `FinanceDataReader` (FDR) for retrieving KOSPI and KOSDAQ stock data.
- Used SQLAlchemy's `on_conflict_do_update` (PostgreSQL `UPSERT`) to handle idempotent updates of `Stock` and `StockPrice` records efficiently.
- Added rate limiting (sleep) in Celery tasks to respect data source constraints during bulk updates.
- Implemented `USMarketService` using `yfinance` to fetch S&P 500 stocks.
- Used `requests` and `lxml` to robustly fetch Wikipedia S&P 500 list, handling potential user-agent blocks.
- Mapped US ticker format (e.g. `BRK.B`) to `yfinance` format (`BRK-B`).
- Added corresponding Celery tasks `update_us_stocks` and `update_us_prices` with rate limiting.
- Implemented `StockChart` component using `lightweight-charts` v5.1.0 with brutalist dark theme aesthetic.
- Used v5 API: `chart.addSeries(CandlestickSeries, options)` and `chart.addSeries(HistogramSeries, options)` instead of deprecated v4 methods.
- Created professional candlestick chart with volume histogram overlay using dual price scales.
- Chart theme uses OKLCH color space for brutalist aesthetic: accent green `oklch(0.75 0.24 142)` for up candles, destructive red `oklch(0.65 0.22 25)` for down.
- Implemented responsive chart resizing with window resize listener and automatic container dimensions.
- Added loading state with staggered pulse animation using custom animation delays.
- Added error state with clear error messaging and brutalist design patterns (thick borders, geometric shapes).
- Created overlay header with ticker symbol and legend, positioned absolute with backdrop blur.
- Playwright tests verify canvas rendering, loading states, and error handling using CDN-loaded library for isolated testing.
- Chart configuration includes custom grid lines, crosshair styling, and time scale with visible time but no seconds.
